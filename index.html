<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vizerio - Y√∂netim Paneli</title>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div id="loading-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background:#f3f4f6; display:flex; justify-content:center; align-items:center; z-index:9999;">
        <div style="text-align:center;">
            <h2 style="color:#1e293b; font-family:'Inter',sans-serif;">Vizerio</h2>
            <p style="color:#64748b;">Sistem Ba≈ülatƒ±lƒ±yor...</p>
        </div>
    </div>

    <div class="app-container" style="display:none;" id="main-app">
        
        <aside class="sidebar">
            <div class="logo-area">
                <h2>VIZERIO</h2>
                <span>Office Hub v2.0</span>
            </div>
            
            <nav class="menu">
                <div class="menu-item active" id="nav-finance" onclick="app.switchTab('finance')">
                    <span class="material-icons-round">dashboard</span> Finans & Muhasebe
                </div>
                <div class="menu-item" id="nav-crm" onclick="app.switchTab('crm')">
                    <span class="material-icons-round">people</span> M√º≈üteri & Operasyon
                </div>
                <div class="menu-item" onclick="alert('Raporlar mod√ºl√º yakƒ±nda eklenecek.')">
                    <span class="material-icons-round">bar_chart</span> Raporlar
                </div>
                <div class="menu-item" onclick="alert('Ayarlar yakƒ±nda eklenecek.')">
                    <span class="material-icons-round">settings</span> Ayarlar
                </div>
                
                <div class="menu-item text-red" style="margin-top: auto;" onclick="window.auth.logout()">
                    <span class="material-icons-round">logout</span> √áƒ±kƒ±≈ü Yap
                </div>
            </nav>

            <div class="user-profile">
                <div style="width:35px; height:35px; background:#3b82f6; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; margin-right:10px;">Y√ñ</div>
                <div>
                    <strong id="user-name" style="font-size:13px;">Y√∂netici</strong>
                </div>
            </div>
        </aside>

        <main class="main-content">
            
            <header class="top-header">
                <div class="search-bar">
                    <span class="material-icons-round">search</span>
                    <input type="text" placeholder="M√º≈üteri veya dosya ara...">
                </div>

                <div class="header-tools">
                    <div class="currency-selector">
                        <select id="currencySelect" onchange="ui.updateCurrency()" style="padding: 5px; border-radius: 6px; border: 1px solid #e2e8f0;">
                            <option value="TRY">‚Ç∫ TRY</option>
                            <option value="USD">$ USD</option>
                            <option value="EUR">‚Ç¨ EUR</option>
                        </select>
                    </div>

                    <button class="icon-btn" id="calendarBtn" onclick="alert('Takvim penceresi a√ßƒ±lacak')">
                        <span class="material-icons-round">calendar_today</span>
                    </button>
                    
                    <button class="icon-btn notification">
                        <span class="material-icons-round">notifications</span>
                    </button>
                </div>
            </header>

            <section id="section-finance" class="content-section active">
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h1 style="margin:0; font-size:24px;">Finansal Durum</h1>
                    <div>
                        <button class="btn btn-green" onclick="ui.openModal('modal-select-income-type')">
                            <span class="material-icons-round">add</span> GELƒ∞R Gƒ∞Rƒ∞≈ûƒ∞
                        </button>
                        <button class="btn btn-red" style="margin-left: 10px;" onclick="ui.openModal('modal-expense')">
                            <span class="material-icons-round">remove</span> Gƒ∞DER EKLE
                        </button>
                    </div>
                </div>

                <div class="summary-cards">
                    <div class="card border-green">
                        <div class="card-title">NET K√ÇR (BU AY)</div>
                        <div class="money">‚Ç∫ 85.000</div>
                    </div>
                    <div class="card border-blue">
                        <div class="card-title">TOPLAM Cƒ∞RO</div>
                        <div class="money">‚Ç∫ 250.000</div>
                    </div>
                    <div class="card border-red">
                        <div class="card-title">TOPLAM Gƒ∞DER</div>
                        <div class="money">‚Ç∫ 165.000</div>
                    </div>
                    <div class="card border-orange">
                        <div class="card-title">‚ö†Ô∏è EMANET BAKƒ∞YE</div>
                        <div class="money">‚Ç¨ 4.500</div>
                    </div>
                </div>

                <div class="card" style="height: 350px; display: flex; align-items: center; justify-content: center; color: #94a3b8;">
                    <p>[ GRAFƒ∞K ALANI BURAYA GELECEK ]</p>
                </div>

            </section>

            <section id="section-crm" class="content-section" style="display:none;">
                <h1 style="margin-bottom:20px;">M√º≈üteri Takip & Operasyon</h1>
                <p>M√º≈üteri listesi ve operasyonel ara√ßlar burada olacak...</p>
            </section>

        </main>
    </div>

    <div class="modal-overlay" id="modal-select-income-type">
        <div class="modal-box" style="width: 600px;">
            <div class="modal-header">
                <h3>Gelir T√ºr√º Se√ßiniz</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-select-income-type')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="selection-grid" style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:15px;">
                    
                    <div class="selection-card" onclick="ui.openModal('modal-income'); ui.closeModal('modal-select-income-type');">
                        <span style="font-size:30px; color:var(--green-profit);">üõÇ</span>
                        <strong style="display:block; margin-top:10px;">Vize ƒ∞≈ülemi</strong>
                        <small style="color:#666;">Dosya a√ß</small>
                    </div>

                    <div class="selection-card" onclick="ui.openModal('modal-extra-income'); ui.closeModal('modal-select-income-type');">
                        <span style="font-size:30px; color:var(--blue-info);">‚úàÔ∏è</span>
                        <strong style="display:block; margin-top:10px;">Ek Gelir</strong>
                        <small style="color:#666;">Bilet, Sigorta</small>
                    </div>

                    <div class="selection-card" onclick="ui.openModal('modal-escrow'); ui.closeModal('modal-select-income-type');">
                        <span style="font-size:30px; color:var(--orange-escrow);">üü†</span>
                        <strong style="display:block; margin-top:10px;">Emanet Para</strong>
                        <small style="color:#666;">Konsolosluk Harcƒ±</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-income">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Yeni Vize Dosyasƒ± (Gelir)</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-income')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="step-indicator">
                    <div class="step active">1</div>
                    <div class="step">2</div>
                    <div class="step">3</div>
                </div>
                <form id="form-income">
                    <div class="form-group">
                        <label>M√º≈üteri Adƒ± Soyadƒ±</label>
                        <input type="text" class="form-control" placeholder="√ñrn: Ahmet Yƒ±lmaz">
                    </div>
                    <div style="display:flex; gap:10px;">
                        <div class="form-group" style="flex:1;">
                            <label>Gidilecek √úlke</label>
                            <select class="form-control"><option>üá©üá™ Almanya</option><option>üá´üá∑ Fransa</option></select>
                        </div>
                        <div class="form-group" style="flex:1;">
                            <label>Vize Tipi</label>
                            <select class="form-control"><option>Turistik</option><option>Ticari</option></select>
                        </div>
                    </div>
                    <div style="text-align:right; margin-top:20px;">
                        <button type="button" class="btn btn-green">ƒ∞leri ></button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-expense">
        <div class="modal-box">
            <div class="modal-header">
                <h3 style="color:var(--red-expense);">Gider Ekle</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-expense')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-expense">
                    <div class="form-group">
                        <label>Gider Kategorisi</label>
                        <select class="form-control">
                            <option value="rent">üè¢ Kira / Ofis</option>
                            <option value="marketing">üì¢ Reklam</option>
                            <option value="bill">‚ö° Faturalar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>A√ßƒ±klama</label>
                        <input type="text" class="form-control" placeholder="√ñrn: Kasƒ±m ayƒ± kirasƒ±">
                    </div>
                    <div class="form-group">
                        <label>Tutar</label>
                        <div style="display:flex; gap:5px;">
                            <input type="number" class="form-control" placeholder="0.00">
                            <select class="form-control" style="width:80px;"><option>TRY</option><option>USD</option></select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-red" style="width:100%;">KAYDET</button>
                </form>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-extra-income">
        <div class="modal-box">
            <div class="modal-header">
                <h3 style="color:var(--blue-info);">Ek Hizmet Satƒ±≈üƒ±</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-extra-income')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-extra-income">
                    <div class="form-group">
                        <label>Hizmet Kategorisi</label>
                        <select class="form-control"><option>‚úàÔ∏è U√ßak Bileti</option><option>üè® Otel</option></select>
                    </div>
                    <div class="form-group">
                        <label>Satƒ±≈ü Fiyatƒ±</label>
                        <input type="number" class="form-control" placeholder="0.00">
                    </div>
                    <button type="submit" class="btn btn-blue" style="width:100%;">SATI≈ûI KAYDET</button>
                </form>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-escrow">
        <div class="modal-box">
            <div class="modal-header">
                <h3 style="color:var(--orange-escrow);">Emanet / Har√ß Giri≈üi</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-escrow')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #fff7ed; border: 1px solid #ffedd5; padding: 10px; margin-bottom: 15px; border-radius: 6px; color: #9a3412; font-size: 13px;">
                    ‚ö†Ô∏è Bu tutar ciroya yansƒ±maz, "Emanet Havuzu"nda tutulur.
                </div>
                <form id="form-escrow">
                    <div class="form-group">
                        <label>M√º≈üteri</label>
                        <input type="text" class="form-control" placeholder="M√º≈üteri Adƒ±...">
                    </div>
                    <div class="form-group">
                        <label>Tutar (EUR/USD)</label>
                        <div style="display:flex; gap:5px;">
                            <input type="number" class="form-control" placeholder="0.00">
                            <select class="form-control" style="width:80px;"><option>EUR</option></select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-orange" style="width:100%;">EMANETE AL</button>
                </form>
            </div>
        </div>
    </div>

    <script src="js/supabase.js"></script>
    
    <script src="js/ui.js"></script>
    
    <script src="js/auth.js"></script>
    
    <script src="js/accounting.js"></script>
    <script src="js/crm.js"></script>
    
    <script src="js/app.js"></script>
    
    <script>
        window.addEventListener('load', () => {
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'flex';
        });
    </script>

</body>
</html>
