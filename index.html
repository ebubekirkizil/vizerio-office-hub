<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vizerio - Y√∂netim Paneli</title>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="app-container">
        
        <aside class="sidebar">
            <div class="logo-area">
                <h2>VIZERIO</h2>
                <span>Office Hub v2.0</span>
            </div>
            
            <nav class="menu">
                <div class="menu-item active" onclick="app.switchTab('finance')">
                    <span class="material-icons-round">dashboard</span> Finans & Muhasebe
                </div>
                <div class="menu-item" onclick="app.switchTab('crm')">
                    <span class="material-icons-round">people</span> M√º≈üteri & Operasyon
                </div>
                <div class="menu-item" onclick="alert('Raporlar Yakƒ±nda...')">
                    <span class="material-icons-round">bar_chart</span> Raporlar
                </div>
                <div class="menu-item" onclick="alert('Ayarlar Yakƒ±nda...')">
                    <span class="material-icons-round">settings</span> Ayarlar
                </div>
                <div class="menu-item text-red" style="margin-top: auto;">
                    <span class="material-icons-round">logout</span> √áƒ±kƒ±≈ü Yap
                </div>
            </nav>
        </aside>

        <main class="main-content">
            
            <header class="top-header">
                <div class="search-bar">
                    <span class="material-icons-round">search</span>
                    <input type="text" placeholder="M√º≈üteri ara...">
                </div>
                <div class="header-tools">
                    <select style="padding: 5px; border-radius: 5px; border: 1px solid #ddd;">
                        <option>‚Ç∫ TRY</option>
                        <option>$ USD</option>
                        <option>‚Ç¨ EUR</option>
                    </select>
                    <button class="icon-btn" onclick="alert('Takvim A√ßƒ±lacak')">
                        <span class="material-icons-round">calendar_today</span>
                    </button>
                    <button class="icon-btn">
                        <span class="material-icons-round">notifications</span>
                    </button>
                </div>
            </header>

          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h1>Finansal Durum</h1>
    <div>
        <button class="btn btn-green" onclick="ui.openModal('modal-select-income-type')">
    <span class="material-icons-round">add</span> GELƒ∞R Gƒ∞Rƒ∞≈ûƒ∞
</button>
        
        <button class="btn btn-red" style="margin-left: 10px;" onclick="ui.openModal('modal-expense')">
            <span class="material-icons-round">remove</span> Gƒ∞DER EKLE
        </button>
    </div>
</div>

                <div class="summary-cards">
                    <div class="card border-green">
                        <div class="card-title">NET K√ÇR (BU AY)</div>
                        <div class="money">‚Ç∫ 85.000</div>
                    </div>
                    <div class="card border-blue">
                        <div class="card-title">TOPLAM Cƒ∞RO</div>
                        <div class="money">‚Ç∫ 250.000</div>
                    </div>
                    <div class="card border-red">
                        <div class="card-title">TOPLAM Gƒ∞DER</div>
                        <div class="money">‚Ç∫ 165.000</div>
                    </div>
                    <div class="card border-orange">
                        <div class="card-title">‚ö†Ô∏è EMANET BAKƒ∞YE</div>
                        <div class="money">‚Ç¨ 4.500</div>
                    </div>
                </div>
                
                <div class="card" style="height: 300px; display: flex; align-items: center; justify-content: center; color: #999;">
                    [ GRAFƒ∞K ALANI BURAYA GELECEK ]
                </div>
            </section>

            <section id="section-crm" class="content-section">
                <h1>M√º≈üteri Takip & Operasyon</h1>
                <p>Burasƒ± Operasyon Ekranƒ± olacak...</p>
            </section>

        </main>
    </div>

    <script src="js/supabase.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/accounting.js"></script>
    <script src="js/crm.js"></script>
    
    <script src="js/app.js"></script>

<div class="modal-overlay" id="modal-income">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Yeni Vize Dosyasƒ± (Gelir)</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-income')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="step-indicator">
                    <div class="step active">1</div>
                    <div class="step">2</div>
                    <div class="step">3</div>
                </div>

                <form id="form-income">
                    <div class="form-step active" id="step-1">
                        <div class="form-group">
                            <label>M√º≈üteri Adƒ± Soyadƒ±</label>
                            <input type="text" class="form-control" placeholder="√ñrn: Ahmet Yƒ±lmaz" required>
                        </div>
                        <div class="form-group" style="display:flex; gap:10px;">
                            <div style="flex:1;">
                                <label>Gidilecek √úlke</label>
                                <select class="form-control">
                                    <option>üá©üá™ Almanya</option>
                                    <option>üá´üá∑ Fransa</option>
                                    <option>üá∫üá∏ ABD</option>
                                </select>
                            </div>
                            <div style="flex:1;">
                                <label>Vize Tipi</label>
                                <select class="form-control">
                                    <option>Turistik</option>
                                    <option>Ticari</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-step" id="step-2" style="display:none;">
                        <div class="form-group">
                            <label>M√º≈üteriden Alƒ±nan Toplam Tutar</label>
                            <div style="display:flex; gap:5px;">
                                <input type="number" class="form-control" placeholder="500">
                                <select class="form-control" style="width:80px;"><option>EUR</option><option>USD</option></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Tahmini Giderler (Har√ß + Sigorta)</label>
                            <input type="number" class="form-control" placeholder="120 (Otomatik d√º≈ü√ºlecek)">
                        </div>
                        <div style="background:#ecfdf5; color:#065f46; padding:10px; border-radius:6px; text-align:center; font-weight:bold;">
                            Tahmini Net K√¢r: <span id="calc-profit">0</span> EUR
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-header" style="background: white; border-top: 1px solid #f1f5f9; justify-content: flex-end;">
                <button class="btn btn-red" style="background:#cbd5e1; color:#333; margin-right:10px;" onclick="ui.closeModal('modal-income')">ƒ∞ptal</button>
                <button class="btn btn-green">ƒ∞leri ></button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-expense">
        <div class="modal-box">
            <div class="modal-header">
                <h3 style="color:var(--red-expense);">Gider Ekle</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-expense')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-expense">
                    <div class="form-group">
                        <label>Gider Kategorisi</label>
                        <select class="form-control">
                            <option value="rent">üè¢ Kira / Ofis</option>
                            <option value="food">üçΩÔ∏è Yemek / Mutfak</option>
                            <option value="marketing">üì¢ Reklam (Google/Instagram)</option>
                            <option value="bill">‚ö° Faturalar</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>A√ßƒ±klama</label>
                        <input type="text" class="form-control" placeholder="√ñrn: Kasƒ±m ayƒ± reklam √∂demesi">
                    </div>
                    <div class="form-group">
                        <label>Tutar</label>
                        <div style="display:flex; gap:5px;">
                            <input type="number" class="form-control" placeholder="0.00">
                            <select class="form-control" style="width:80px;">
                                <option>TRY</option>
                                <option>USD</option>
                                <option>EUR</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-red" style="width:100%;">KAYDET</button>
                </form>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="modal-select-income-type">
        <div class="modal-box" style="width: 600px;">
            <div class="modal-header">
                <h3>Gelir T√ºr√º Se√ßiniz</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-select-income-type')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="selection-grid" style="grid-template-columns: 1fr 1fr 1fr;">
                    
                    <div class="selection-card" onclick="ui.openModal('modal-income'); ui.closeModal('modal-select-income-type');">
                        <span style="color:var(--green-profit);">üõÇ</span>
                        <strong>Vize ƒ∞≈ülemi</strong>
                        <small style="color:#666;">Yeni dosya a√ß</small>
                    </div>

                    <div class="selection-card" onclick="ui.openModal('modal-extra-income'); ui.closeModal('modal-select-income-type');">
                        <span style="color:var(--blue-info);">‚úàÔ∏è</span>
                        <strong>Ek Gelir</strong>
                        <small style="color:#666;">Bilet, Otel, Sigorta</small>
                    </div>

                    <div class="selection-card" onclick="ui.openModal('modal-escrow'); ui.closeModal('modal-select-income-type');">
                        <span style="color:var(--orange-escrow);">üü†</span>
                        <strong>Emanet Para</strong>
                        <small style="color:#666;">Konsolosluk Harcƒ±</small>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-extra-income">
        <div class="modal-box">
            <div class="modal-header">
                <h3 style="color:var(--blue-info);">Ek Hizmet Satƒ±≈üƒ±</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-extra-income')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-extra-income">
                    <div class="form-group">
                        <label>Hizmet Kategorisi</label>
                        <select class="form-control">
                            <option>‚úàÔ∏è U√ßak Bileti</option>
                            <option>üè® Otel Rezervasyonu</option>
                            <option>üè• Seyahat Saƒülƒ±k Sigortasƒ±</option>
                            <option>üöê Transfer / Tur</option>
                            <option>üìÑ Danƒ±≈ümanlƒ±k / Diƒüer</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>M√º≈üteri (Ara veya Yeni Yaz)</label>
                        <input type="text" class="form-control" placeholder="M√º≈üteri Adƒ± Soyadƒ±...">
                    </div>

                    <div style="display:flex; gap:10px;">
                        <div class="form-group" style="flex:1;">
                            <label>Satƒ±≈ü Fiyatƒ± (M√º≈üteriden Alƒ±nan)</label>
                            <input type="number" class="form-control" placeholder="0.00">
                        </div>
                        <div class="form-group" style="flex:1;">
                            <label>Maliyet (Bize Geli≈üi)</label>
                            <input type="number" class="form-control" placeholder="0.00">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>A√ßƒ±klama</label>
                        <input type="text" class="form-control" placeholder="√ñrn: THY Paris Bileti">
                    </div>

                    <button type="submit" class="btn btn-blue" style="width:100%;">SATI≈ûI KAYDET</button>
                </form>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-escrow">
        <div class="modal-box">
            <div class="modal-header">
                <h3 style="color:var(--orange-escrow);">Emanet / Har√ß Giri≈üi</h3>
                <button class="close-btn" onclick="ui.closeModal('modal-escrow')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #fff7ed; border: 1px solid #ffedd5; padding: 10px; margin-bottom: 15px; border-radius: 6px; color: #9a3412; font-size: 13px;">
                    ‚ö†Ô∏è <strong>Dƒ∞KKAT:</strong> Bu tutar ≈üirket cirosuna yansƒ±maz, "Emanet Havuzu"nda tutulur.
                </div>
                <form id="form-escrow">
                    <div class="form-group">
                        <label>M√º≈üteri</label>
                        <input type="text" class="form-control" placeholder="M√º≈üteri Adƒ±...">
                    </div>
                    <div class="form-group">
                        <label>Emanet Tipi</label>
                        <select class="form-control">
                            <option>Konsolosluk Harcƒ±</option>
                            <option>Ba≈üvuru Merkezi √úcreti (iData/VFS)</option>
                            <option>Teminat</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Tutar</label>
                        <div style="display:flex; gap:5px;">
                            <input type="number" class="form-control" placeholder="0.00">
                            <select class="form-control" style="width:80px;"><option>EUR</option><option>USD</option></select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-orange" style="width:100%;">EMANETE AL</button>
                </form>
            </div>
        </div>
    </div>
    
</body>
</html>
